{% extends "mqarules/mqarules_index.html" %}
{% block title%}
Rule: Synchronized Variables
{% endblock %}

{% block mqarulesmain %}

<h2>Rule for Synchronized Variables</h2>
<h3>MQA Rules</h3>
<hr>
Sometimes, we need to synchronize 2 parameters sweep in the simulation, for example, in LOD effect, SA and SB are often synchronized.

<br>
<br>
<img src="/static/mqarules/synchro/lod.png" border="1px"/><br/>
(Picture cited from BSIM4 model manual.)
<br/><br/>

SynchroSA_SB.rule: <a href="/mqarules/synchro/rule/download" target="_blank">download</a>
<pre>
[common]
appliedmodel = binning, global, macro

[Group: 50:Title= Synchro SA SB Example]

[Label: 5001:title= Idsat_W vs. SA]
[Condition:1]
[Option:<font style="color:red">Synchro=SA_SB</font>]
[Loops
: X=SA(Start=5E-7, Stop=2E-6, num=11)
: P0=SB(Start=5E-7, Stop=2E-6, num=11)
: P=W(g_wmin)
: P1=Vgs(vgg)
: P2=Vds(vdd)
: P3=Vbs(0)
: P4=T(tnom)
: P5=L(g_lmin)
]
[Target
: Idsat_W=Idsat/W
: y=Idsat_W
]
[Check: 01:Check Trend: Save2DData (p,x,y,"<font style="color:blue">@Synchro=SA_SB</font>"): error: Trend is not right]
[Check: 02:Check Trend, SA SB not in Sync: Save2DData (p,x,y): error: Trend is not right]
[Compare: 03:RMS of Idsat vs. L : CompPlot(p,x,y,"<font style="color:blue">@Synchro=SA_SB</font>"): error: TBD]
[Corner:04:Check corner of Idsat vs. L : CompareTREND(x,y,"@TREND=1","<font style="color:blue">@Synchro=SA_SB</font>"): error: TBD]

</pre>
Using a MQA's default BSIM4 model, together with the above example rule, we will get the following Idsat_W vs SA graph, by [Check :01]
<br/>
<img src="/static/mqarules/synchro/w.png" border="1px"/><br/><br/>
Note that since SA and SB are synchronized, we don't see SB in the index table(the table on the left) any more.
<br/><br/>
However, the picture below shows what would happen if we didn't use the Synchro=SA_SB option, which is generated by [Check :02] we will see SB in the index table and won't be able to merge all points on one graph.
<img src="/static/mqarules/synchro/wo.png" border="1px"/><br/><br/>

Further, we need to understand the effect of two Synchro=SA_SB options, the <font style="color:red">red</font>  one appears in the [Option] section, determines how MQA create the netlist and run simulation;
on the other hand, the <font style="color:blue">blue</font>  ones appear in the functions will decide how MQA display the graph. <br/><br/>
In this case, both options are required, firstly we need MQA to run simulation with SA and SB synchronized, we will see different(wrong) simulation result if we don't use it in the [Option] section.
<br/>Then we need MQA to display the graph with SA and SB synchronized.
<br/><br/><br/>


{% endblock %}
